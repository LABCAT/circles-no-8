{"version":3,"sources":["js/helpers/Globals.js","js/functions/PlayIcon.js","js/classes/Particle.js","js/classes/ParticleSystem.js","js/classes/ColourGenerator.js","audio/circles-no-8.ogg","audio/circles-no-8.mid","js/P5SketchWithAudio.js","js/App.js","index.js"],"names":["window","p5","PlayIcon","_jsxs","id","className","xmlns","height","viewBox","width","children","_jsx","d","fill","Particle","constructor","p","colour","loc2","minSize","maxSize","this","PARTICLE_START_FORCE","PARTILE_MAX_VEL","PARTICLE_MAX_ACC","SHRINK_RATE","loc","createVector","x","y","vel","acc","size","random","angle","update","TWO_PI","magnitude","cos","sin","limit","add","PARTICLE_MAX_VEL","display","stroke","R","G","B","ellipse","isDead","ParticleSystem","particles","count","particleMinSize","particleMaxSize","setColour","updateParticleMinMaxSize","addParticle","length","i","push","particle","splice","ColourGenerator","MIN_SPEED","MAX_SPEED","Rspeed","Gspeed","Bspeed","init","P5SketchWithAudio","sketchRef","useRef","Sketch","canvas","canvasWidth","innerWidth","canvasHeight","innerHeight","audioLoaded","player","PPQ","loadMidi","Midi","fromUrl","midi","then","result","console","log","noteSet1","tracks","notes","scheduleCueSet","noteSet2","noteSet3","document","getElementById","classList","remove","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","poly","arguments","undefined","lastTicks","currentCue","note","ticks","time","addCue","system","bgColourSet","currentBG","setup","createCanvas","background","randomColor","require","luminosity","draw","isPlaying","direction","moduloMap","setNextLocation","map","executeCueSet1","filter","executeCueSet2","executeCueSet3","hasStarted","mousePressed","pause","parseInt","currentTime","buffer","duration","reset","dataLayer","title","location","href","addClass","play","creditsLogged","stop","updateCanvasDimensions","resizeCanvas","attachEvent","addEventListener","useEffect","current","ref","App","ReactDOM","render","React","StrictMode"],"mappings":"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","file":"static/js/main.575635c1.chunk.js","sourcesContent":["// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","export default function PlayIcon() {\n    return (\n        <svg id=\"play-icon\" className='fade-out' xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n        </svg>\n    )\n}\n","export default class Particle {\r\n    constructor(p, colour, loc2, minSize, maxSize) {\r\n        this.p = p;\r\n        this.colour = colour;\r\n        this.PARTICLE_START_FORCE = 50;\r\n        this.PARTILE_MAX_VEL = 4; ///7;//4;\r\n        this.PARTICLE_MAX_ACC = 10; // Max particle acceleration\r\n        this.SHRINK_RATE = 5;//2;//5;\r\n        this.loc = this.p.createVector(loc2.x, loc2.y);\r\n        this.vel = this.p.createVector(0, 0);\r\n        this.acc = this.p.createVector(0, 0);\r\n        this.size = this.p.random(minSize, maxSize);\r\n        this.angle = 0;\r\n    }\r\n  \r\n    update() {\r\n        this.angle += this.p.random(0, this.p.TWO_PI);\r\n        let magnitude = this.p.random(0, this.PARTICLE_START_FORCE);\r\n    \r\n        this.acc.x += this.p.cos(this.angle) * magnitude;\r\n        this.acc.y += this.p.sin(this.angle) * magnitude;\r\n    \r\n        this.acc.limit(this.PARTICLE_MAX_ACC);\r\n    \r\n        this.vel.add(this.acc);\r\n        this.vel.limit(this.PARTICLE_MAX_VEL);\r\n    \r\n        this.loc.add(this.vel);\r\n    \r\n        if (this.loc.x > this.p.width)\r\n            this.loc.x -= this.p.width;\r\n        if (this.loc.x < 0)\r\n            this.loc.x += this.p.width;\r\n        if (this.loc.y > this.p.height)\r\n            this.loc.y -= this.p.height;\r\n        if (this.loc.y < 0)\r\n            this.loc.y += this.p.height;\r\n    \r\n        this.size -= this.SHRINK_RATE;\r\n    }\r\n  \r\n    display() {\r\n        // this.colour.update();\r\n        this.p.stroke(255, 255, 255);\r\n        this.p.fill(this.colour.R, this.colour.G, this.colour.B, 63);\r\n        this.p.ellipse(this.loc.x, this.loc.y, this.size, this.size);\r\n        this.colour.update();\r\n        this.colour.update();\r\n        this.p.fill(this.colour.R, this.colour.G, this.colour.B, 127);\r\n        this.p.ellipse(this.loc.x, this.loc.y, this.size / 2, this.size / 2);\r\n        this.colour.update();\r\n        this.p.fill(this.colour.R, this.colour.G, this.colour.B, 193);\r\n        this.p.ellipse(this.loc.x, this.loc.y, this.size / 5, this.size / 4);\r\n    }\r\n  \r\n    isDead() {\r\n        return this.size < 0;\r\n    }\r\n}\r\n","import Particle from './Particle.js';\r\n\r\nexport default class ParticleSystem {\r\n    constructor(p, colour) {\r\n        this.p = p;\r\n        this.colour = colour;\r\n        this.particles = [];\r\n        this.count = 0;\r\n        this.particleMinSize = p.width / 48;\r\n        this.particleMaxSize = p.width / 32;\r\n    }\r\n\r\n    setColour(colour) {\r\n        this.colour = colour;\r\n    }\r\n\r\n    updateParticleMinMaxSize() {\r\n        this.particleMinSize = this.p.width / 32;\r\n        this.particleMaxSize = this.p.width / 20;\r\n    }\r\n\r\n    addParticle(loc) {\r\n        this.count++;\r\n        const SPAWN_COUNT = 5; // Assuming SPAWN_COUNT and MAX_PARTICLES are global constants\r\n        const MAX_PARTICLES = 50;\r\n\r\n        if (this.particles.length + SPAWN_COUNT < MAX_PARTICLES) {\r\n            for (let i = 0; i < SPAWN_COUNT; i++) {\r\n                this.particles.push(new Particle(this.p, this.colour, loc, this.particleMinSize, this.particleMaxSize));\r\n            }\r\n        }\r\n    }\r\n\r\n    update() {\r\n        for (let i = this.particles.length - 1; i >= 0; i--) {\r\n            let particle = this.particles[i];\r\n            particle.update();\r\n            if (particle.isDead()) {\r\n                this.particles.splice(i, 1);\r\n                this.count--;\r\n            } else {\r\n                particle.display();\r\n            }\r\n        }\r\n    }\r\n}\r\n","export default class ColourGenerator {\r\n    constructor(p) {\r\n        this.p = p;\r\n        this.MIN_SPEED = 0.2;\r\n        this.MAX_SPEED = 0.7;\r\n        this.R = 0;\r\n        this.G = 0;\r\n        this.B = 0;\r\n        this.Rspeed = 0;\r\n        this.Gspeed = 0;\r\n        this.Bspeed = 0;\r\n        this.init();\r\n    }\r\n  \r\n    init() {\r\n        // Starting colour\r\n        this.R = this.p.random(255);\r\n        this.G = this.p.random(255);\r\n        this.B = this.p.random(255);\r\n    \r\n        // Starting transition speed\r\n        this.Rspeed = (this.p.random(1) > 0.5 ? 1 : -1) * this.p.random(this.MIN_SPEED, this.MAX_SPEED);\r\n        this.Gspeed = (this.p.random(1) > 0.5 ? 1 : -1) * this.p.random(this.MIN_SPEED, this.MAX_SPEED);\r\n        this.Bspeed = (this.p.random(1) > 0.5 ? 1 : -1) * this.p.random(this.MIN_SPEED, this.MAX_SPEED);\r\n    }\r\n  \r\n    update() {\r\n        // Use transition to alter original colour (Keep within RGB bounds)\r\n        this.Rspeed = ((this.R += this.Rspeed) > 255 || (this.R < 0)) ? -this.Rspeed : this.Rspeed;\r\n        this.Gspeed = ((this.G += this.Gspeed) > 255 || (this.G < 0)) ? -this.Gspeed : this.Gspeed;\r\n        this.Bspeed = ((this.B += this.Bspeed) > 255 || (this.B < 0)) ? -this.Bspeed : this.Bspeed;\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/circles-no-8.e2de327b.ogg\";","export default __webpack_public_path__ + \"static/media/circles-no-8.c61934ff.mid\";","import React, { useRef, useEffect } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\nimport PlayIcon from './functions/PlayIcon.js';\nimport ParticleSystem from './classes/ParticleSystem.js';\nimport ColourGenerator from './classes/ColourGenerator.js';\n\nimport audio from \"../audio/circles-no-8.ogg\";\nimport midi from \"../audio/circles-no-8.mid\";\n\n/**\n * Circles No. 8\n * Inspiration: https://openprocessing.org/sketch/505090\n */\nconst P5SketchWithAudio = () => {\n    const sketchRef = useRef();\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    console.log(result);\n                    const noteSet1 = result.tracks[2].notes; // Sampler 1 - alone5 (Digital Love)\n                    p.scheduleCueSet(noteSet1, 'executeCueSet1');\n                    const noteSet2 = result.tracks[4].notes; // Synth 1 - Bluetag\n                    p.scheduleCueSet(noteSet2, 'executeCueSet2');\n                    const noteSet3 = result.tracks[11].notes; // Combinator 2 - Celtic Dream (Mod Wheel)\n                    p.scheduleCueSet(noteSet3, 'executeCueSet3');\n                    p.audioLoaded = true;\n                    document.getElementById(\"loader\").classList.add(\"loading--complete\");\n                    document.getElementById(\"play-icon\").classList.remove(\"fade-out\");\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, poly = false)  => {\n            let lastTicks = -1,\n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || poly){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        }\n\n        p.colour = null;\n        \n        p.system = null;\n\n        p.bgColourSet = [];\n\n        p.currentBG = null;\n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            // p.colorMode(p.HSB);\n            p.background(0, 0, 0);\n            p.colour = new ColourGenerator(p)\n            p.system = new ParticleSystem(p, p.colour);\n            p.randomColor = require('randomcolor');\n            p.bgColourSet = p.randomColor({luminosity: 'dark', count: 12});\n            p.currentBG = p.random(p.bgColourSet);\n        }\n\n        p.draw = () => {\n            if(p.audioLoaded && p.song.isPlaying()){\n                p.system.update();   \n            }\n        }\n\n        p.direction = 'left';\n\n        p.x = 0;\n\n        p.y = 0;\n\n        p.moduloMap = 0;\n\n        p.setNextLocation = () => {\n            switch (p.direction) {\n                case 'right':\n                    p.x = p.map(p.moduloMap % 122880, 0, 122880, p.width - p.width / 32, 0 + p.width / 32)\n                    p.y = p.random(0, p.height);\n                    break;\n                case 'down':\n                    p.x = p.random(0, p.width);\n                    p.y = p.map(p.moduloMap % 122880, 0, 122880, 0 + p.height / 32, p.height - p.height / 32)\n                    break;\n                case 'up':\n                    p.x = p.random(0, p.width);\n                    p.y = p.map(p.moduloMap % 122880, 0, 122880, p.width - p.height / 32, 0 + p.height / 32)\n                    break;\n                default:\n                    p.x = p.map(p.moduloMap % 122880, 0, 122880, 0 + p.width / 32, p.width - p.width / 32)\n                    p.y = p.random(0, p.height);\n                    break;\n            }\n        }\n\n        p.executeCueSet1 = (note) => {\n            const { currentCue, ticks } = note;\n            p.moduloMap = ticks % 122880;\n            if(currentCue % 16 === 0) {\n                if(currentCue < 80) {\n                    p.background(0, 0, 0, 239);\n                }\n                p.system = new ParticleSystem(p, p.colour);\n                p.direction = p.random(\n                    ['left', 'right', 'down', 'up'].filter(d => d !== p.direction)\n                );\n            }\n            \n            p.setNextLocation();\n            p.system.setColour(p.colour);\n            p.system.addParticle(p.createVector(p.x, p.y));\n        }\n\n        p.executeCueSet2 = (note) => {\n            const { currentCue } = note;\n            if(currentCue % 2 === 0 && currentCue < 48) {\n                p.currentBG = p.bgColourSet.filter(colour => colour !== p.currentBG);\n                p.background(p.currentBG);\n                p.system.updateParticleMinMaxSize();\n            }\n            p.setNextLocation();\n            p.system.addParticle(p.createVector(p.x, p.y));\n        }\n\n        p.executeCueSet3 = (note) => {\n            p.setNextLocation();\n            p.system.addParticle(p.createVector(p.x, p.y));\n        }\n\n        p.hasStarted = false;\n\n        p.mousePressed = () => {\n            if(p.audioLoaded){\n                if (p.song.isPlaying()) {\n                    p.song.pause();\n                } else {\n                    if (parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)) {\n                        p.reset();\n                        if (typeof window.dataLayer !== typeof undefined){\n                            window.dataLayer.push(\n                                { \n                                    'event': 'play-animation',\n                                    'animation': {\n                                        'title': document.title,\n                                        'location': window.location.href,\n                                        'action': 'replaying'\n                                    }\n                                }\n                            );\n                        }\n                    }\n                    document.getElementById(\"play-icon\").classList.add(\"fade-out\");\n                    p.canvas.addClass(\"fade-in\");\n                    p.song.play();\n                    if (typeof window.dataLayer !== typeof undefined && !p.hasStarted){\n                        window.dataLayer.push(\n                            { \n                                'event': 'play-animation',\n                                'animation': {\n                                    'title': document.title,\n                                    'location': window.location.href,\n                                    'action': 'start playing'\n                                }\n                            }\n                        );\n                        p.hasStarted = false\n                    }\n                }\n            }\n        }\n\n        p.creditsLogged = false;\n\n        p.logCredits = () => {\n            if (\n                !p.creditsLogged &&\n                parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)\n            ) {\n                p.creditsLogged = true;\n                    console.log(\n                    \"Music By: http://labcat.nz/\",\n                    \"\\n\",\n                    \"Animation By: https://github.com/LABCAT/\"\n                );\n                p.song.stop();\n            }\n        };\n\n        p.reset = () => {\n\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.canvas = p.resizeCanvas(p.canvasWidth, p.canvasHeight);\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    useEffect(() => {\n        new p5(Sketch, sketchRef.current);\n    }, []);\n\n    return (\n        <div ref={sketchRef}>\n            <PlayIcon />\n        </div>\n    );\n};\n\nexport default P5SketchWithAudio;\n","import P5SketchWithAudio from './P5SketchWithAudio'\n\nfunction App() {\n  return (\n    <P5SketchWithAudio/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/build.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}